C51 COMPILER V9.60.7.0   NIXIE                                                             09/05/2025 22:16:47 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE NIXIE
OBJECT MODULE PLACED IN .\Objects\nixie.obj
COMPILER INVOKED BY: C:\keil_C51\C51\BIN\C51.EXE nixie.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\ni
                    -xie.lst) TABS(2) OBJECT(.\Objects\nixie.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          
   4          //数码管显示缓存区
   5          unsigned char Nixie_Buf[9]={0,10,10,10,10,10,10,10,10};
   6          
   7          //数码管段码表（0-9：数字，10：空白，11：横杠）
   8          unsigned char NixieTable[]={0x3F,0x06,0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F,0x00,0x40};
   9          
  10          /**
  11            * @brief  设置显示缓存区
  12            * @param  Location 要设置的位置，范围：1~8
  13            * @param  Number 要设置的数字，范围：段码表索引范围
  14            * @retval 无
  15            */
  16          void Nixie_SetBuf(unsigned char Location, unsigned char Number)  //补充Number类型
  17          {
  18   1          //范围检查，避免越界
  19   1          if(Location >= 1 && Location <= 8)
  20   1          {
  21   2              Nixie_Buf[Location] = Number;
  22   2          }
  23   1      }
  24          
  25          /**
  26            * @brief  数码管扫描显示
  27            * @param  Location 要显示的位置，范围：1~8
  28            * @param  Number 要显示的数字，范围：段码表索引范围
  29            * @retval 无
  30            */
  31          void Nixie_Scan(unsigned char Location, unsigned char Number)  //补充Number类型
  32          {
  33   1          P0 = 0x00;                //段码清0，消影
  34   1          switch(Location)          //位码输出
  35   1          {
  36   2              case 1:P2_4=1;P2_3=1;P2_2=1;break;
  37   2              case 2:P2_4=1;P2_3=1;P2_2=0;break;
  38   2              case 3:P2_4=1;P2_3=0;P2_2=1;break;
  39   2              case 4:P2_4=1;P2_3=0;P2_2=0;break;
  40   2              case 5:P2_4=0;P2_3=1;P2_2=1;break;
  41   2              case 6:P2_4=0;P2_3=1;P2_2=0;break;
  42   2              case 7:P2_4=0;P2_3=0;P2_2=1;break;
  43   2              case 8:P2_4=0;P2_3=0;P2_2=0;break;
  44   2              default:              //默认不选中任何位置，进一步消影
  45   2                  P2_4=1;P2_3=1;P2_2=1;
  46   2                  return;
  47   2          }
  48   1          //段码索引范围检查，避免越界访问
  49   1          if(Number < sizeof(NixieTable)/sizeof(NixieTable[0]))
  50   1          {
  51   2              P0 = NixieTable[Number];  //段码输出
  52   2          }
  53   1      }
  54          
C51 COMPILER V9.60.7.0   NIXIE                                                             09/05/2025 22:16:47 PAGE 2   

  55          /**
  56            * @brief  数码管驱动函数，在中断中调用
  57            * @param  无
  58            * @retval 无
  59            */
  60          void Nixie_Loop(void)
  61          {
  62   1          static unsigned char i=1;
  63   1          Nixie_Scan(i, Nixie_Buf[i]);
  64   1          i++;
  65   1          if(i >= 9)
  66   1          {
  67   2              i = 1;  //循环扫描1-8位
  68   2          }
  69   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    161    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     22    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
